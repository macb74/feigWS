<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="cache-control" content="no-cache; no-store; max-age=0" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="description" content="openTiming SportsTiming" />
	<meta http-equiv="Content-Language" content="de" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
	<meta name="decorator" content="main" />
	
	<title>openTiming</title>
	
    <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/feigRFID.css}" rel="stylesheet" />
	<link th:href="@{/css/font-awesome.css}" rel="stylesheet" />
	
	<script type="text/javascript" th:src="@{/js/jquery-2.1.4.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/feigRFID.js}"></script>
    
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script type="text/javascript" th:src="@{/js/ie10-viewport-bug-workaround.js}" />
    
    
</head>
<body>

	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#"><span class="navbar-brand-orange">feig</span>RFID</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">	
			</div>
		</div>
	</nav>
	
	<div class="main">
		<div class="race-table">

			<!-- <h3 class="text-center">Reader Config</h3>  -->
		
			<div>
			
			  <!-- Nav tabs -->
			  <ul class="nav nav-tabs" role="tablist">
			    <li th:each="reader, r : ${readers}" th:with="readerName=${#strings.replace(reader,'.','_')}" role="presentation" th:class="(${reader} == ${readers[0]})? 'active' : null">
			    	<a th:href="@{#reader-{reader}(reader=${readerName})}" th:id="${r.index}" aria-controls="home" role="tab" data-toggle="tab">
			    		<span th:text="${reader}" />
			    	</a>
			    </li>
			  </ul>
			
			  <!-- Tab panes -->
			  <div class="tab-content">
			    
		
			    <div th:each="reader : ${readers}" role="tabpanel" th:with="readerName=${#strings.replace(reader,'.','_')}" th:class="(${reader} == ${readers[0]})? 'active tab-pane' : 'tab-pane'" th:id="@{reader-{reader}(reader=${readerName})}">
		
					<script th:inline="javascript">
						/*<![CDATA[*/
						$(document).ready(function(){			
							getReaderData([[${readerName}]], 'null');
						});
						/*]]>*/
					</script>
		
			    	<div class="alert alert-danger hidden col-sm-offset-3 col-sm-6" th:id="@{faultstring-{reader}(reader=${readerName})}" role="alert"></div>
			
						<form role="form" class="form-horizontal" id="editReader" name="editReader">
							<div class="form-group"></div>

							<div class="form-group">
								<label for="power" class="col-sm-4 control-label">Power:</label>
								<div class="col-sm-3">
									<input name="power" maxlength="200" type="text" class="form-control" th:id="@{power-{reader}(reader=${readerName})}" placeholder="Power" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',3); return false;'" role="button">SET</a>
								</div>	
							</div>
						
							<div class="form-group">
								<label for="trValidTime" class="col-sm-4 control-label">Transponder Valid Time:</label>
								<div class="col-sm-3">
									<input name="transponderValidTime" maxlength="200" type="text" class="form-control" th:id="@{transponderValidTime-{reader}(reader=${readerName})}" placeholder="Transponder Valid Time" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',2); return false;'" role="button">SET</a>
								</div>
							</div>
						 
						 	<div class="form-group">
								<label for="mode" class="col-sm-4 control-label">Mode:</label>
								<div class="col-sm-3">
									<input name="mode" maxlength="200" type="text" class="form-control" th:id="@{mode-{reader}(reader=${readerName})}" placeholder="Mode" value="" readonly="true" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',5); return false;'" role="button">CHANGE</a>
								</div>	
							</div>
							
							<div class="form-group">
								<label for="time" class="col-sm-4 control-label">Time:</label>
								<div class="col-sm-3">
									<input name="readerTime" maxlength="200" type="text" class="form-control" th:id="@{readerTime-{reader}(reader=${readerName})}" placeholder="Time" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',1); return false;'" role="button">SET</a>
								</div>	
							</div>
						
							<div class="form-group">
								<label for="antenna" class="col-sm-4 control-label">Antennen:</label>
								<div class="col-sm-3">
									<input name="antenna" maxlength="200" type="text" class="form-control" th:id="@{antenna-{reader}(reader=${readerName})}" placeholder="Antennen" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',0); return false;'" role="button">SET</a>
								</div>		
							</div>
							
							<div class="form-group">
								<div class="col-sm-offset-4 col-sm-3">
									<a class="btn btn-success" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',-1); return false;'" role="button">UPDATE</a>
								</div>
								<div class="col-sm-4">
									<a class="btn btn-danger" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',4); return false;'" role="button">CUT READER FILE</a>
								</div>
							</div>		
						</form>
		
					<div class="table-responsive col-sm-offset-2 col-sm-7">
						<table class="table table-striped table-vcenter">
							<thead>
								<tr>
									<th>Datei</th>
									<th>Zeilen</th>
									<th>Aktion</th>
								</tr>
							</thead>
							<tbody th:id="'tbody-' + ${readerName}">
								
							</tbody>
						</table>
					</div>
				
				</div>	
			  </div>
			</div>

		</div>

		<div class="content-table"></div>
	</div>
	
	
		<div class="modal fade" tabindex="-1" role="dialog" id="modal" aria-labelledby="gridSystemModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
      			<div class="modal-header">
      				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      				<h4 class="modal-title" id="gridSystemModalLabel">&nbsp;</h4>
      			</div>
      			<div class="modal-body" id="modal-body">
      				<span class="text-muted">loading...</span>
      			</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" onclick="clearModal(); return false;" data-dismiss="modal">Close</button>
				</div>
    		</div>
 		</div>
	</div>
				
</body>
</html>