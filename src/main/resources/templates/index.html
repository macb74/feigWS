<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>openTiming</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="cache-control" content="no-cache; no-store; max-age=0" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="description" content="openTiming SportsTiming" />
	<meta http-equiv="Content-Language" content="de" />
	<meta name="decorator" content="main" />
		
    <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/feigRFID.css}" rel="stylesheet" />
	<link th:href="@{/css/font-awesome.css}" rel="stylesheet" />
	
</head>
<body>

	<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
  		<a class="navbar-brand" href="#"><span class="navbar-brand-orange">feig</span>RFID</a>
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
  			<span class="navbar-toggler-icon"></span>
  		</button>
  		
  		<div class="collapse navbar-collapse" id="navbarSupportedContent">
  		</div>
  	</nav>
	
	<div class="main">

		 <!-- <h3 class="text-center">Reader Config</h3>  -->
		 <!-- Reader Nav tabs -->
		 <ul class="nav nav-tabs" role="tablist">
		   <li class="nav-item" th:each="reader, r : ${readers}" th:with="readerName=${#strings.replace(reader,'.','_')}" role="presentation">
		   	<a th:class="(${reader} == ${readers[0]})? 'active nav-link' : 'nav-link'" th:href="@{#reader-{reader}(reader=${readerName})}" th:id="'tab-' + ${readerName} + '-main'" aria-controls="home" role="tab" data-toggle="tab">
		   		<span th:text="${reader}" />
		   	</a>
		   </li>
		 </ul>
		
		<!-- Reader Tab panes -->
		<div class="tab-content">
			<div th:each="reader : ${readers}" role="tabpanel" th:with="readerName=${#strings.replace(reader,'.','_')}" th:class="(${reader} == ${readers[0]})? 'active tab-pane' : 'tab-pane'" th:id="@{reader-{reader}(reader=${readerName})}">
		
			
				<!-- Config Nav tabs -->
				<ul class="nav nav-tabs" role="tablist" th:id="'configtabs-' + ${readerName}">
					<li class="nav-item">
				    	<a class="nav-link active" th:href="@{#reader-{reader}-config(reader=${readerName})}" th:id="'tab-' + ${readerName} + '-config'" aria-controls="home" role="tab" data-toggle="tab">CONFIG</a>
				  	</li>
				  	<li class="nav-item">
				    	<a class="nav-link" th:href="@{#reader-{reader}-write(reader=${readerName})}" th:id="'tab-' + ${readerName} + '-write'" aria-controls="home" role="tab" data-toggle="tab">WRITE</a>
				  	</li>
				  	<li class="nav-item">
				    	<a class="nav-link" th:href="@{#reader-{reader}-live(reader=${readerName})}" th:id="'tab-' + ${readerName} + '-live'" aria-controls="home" role="tab" data-toggle="tab">LIVE</a>
				  	</li>
				</ul>
						
				<!-- Config Tab panes -->
				<div class="tab-content">
					<div role="tabpanel" class="active tab-pane" th:id="@{reader-{reader}-config(reader=${readerName})}">
						<div class="row justify-content-md-center">
					   		<div class="alert alert-danger hidden col-sm-6" th:id="@{faultstring-{reader}(reader=${readerName})}" role="alert"></div>
						</div>
						<form role="form" class="form-horizontal" id="editReader" name="editReader">
				
							<div class="form-group row justify-content-md-center">
								<label for="power" class="text-right col-sm-4 col-form-label">Power:</label>
								<div class="col-sm-3">
									<input name="power" maxlength="200" type="text" class="form-control" th:id="@{power-{reader}(reader=${readerName})}" placeholder="Power" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',3); return false;'" role="button">SET</a>
								</div>	
							</div>
				
							<div class="form-group row justify-content-md-center">
								<label for="trValidTime" class="text-right col-sm-4 col-form-label">Transponder Valid Time:</label>
								<div class="col-sm-3">
									<input name="transponderValidTime" maxlength="200" type="text" class="form-control" th:id="@{transponderValidTime-{reader}(reader=${readerName})}" placeholder="Transponder Valid Time" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',2); return false;'" role="button">SET</a>
								</div>
							</div>
						 
						 	<div class="form-group row justify-content-md-center">
								<label for="mode" class="text-right col-sm-4 col-form-label">Mode:</label>
								<div class="col-sm-3">
									<input name="mode" maxlength="200" type="text" class="form-control" th:id="@{mode-{reader}(reader=${readerName})}" placeholder="Mode" value="" readonly="true" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',5); return false;'" role="button">CHANGE</a>
								</div>	
							</div>
							
							<div class="form-group row justify-content-md-center">
								<label for="time" class="text-right col-sm-4 col-form-label">Time:</label>
								<div class="col-sm-3">
									<input name="readerTime" maxlength="200" type="text" class="form-control" th:id="@{readerTime-{reader}(reader=${readerName})}" placeholder="Time" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',1); return false;'" role="button">SET</a>
								</div>	
							</div>
						
							<div class="form-group row justify-content-md-center">
								<label for="antenna" class="text-right col-sm-4 col-form-label">Antennen:</label>
								<div class="col-sm-3">
									<input name="antenna" maxlength="200" type="text" class="form-control" th:id="@{antenna-{reader}(reader=${readerName})}" placeholder="Antennen" value="" />
								</div>
								<div class="col-sm-4">
									<a class="btn btn-success btn-w90" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',0); return false;'" role="button">SET</a>
								</div>		
							</div>
							
							<div class="form-group row justify-content-md-center">
								<div class="text-right col-sm-7">
									<a class="btn btn-success" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',-1); return false;'" role="button">UPDATE</a>
								</div>
								<div class="col-sm-4">
									<a class="btn btn-danger" href="#" th:onclick="'getReaderData(\'' + ${readerName} + '\',4); return false;'" role="button">CUT READER FILE</a>
								</div>
							</div>		
						</form>
						
						<div class="row justify-content-md-center">
							<div class="table-responsive col-sm-7">
								<table class="table table-striped table-vcenter">
									<thead>
										<tr>
											<th>Datei</th>
											<th>Zeilen</th>
											<th>Aktion</th>
										</tr>
									</thead>
									<tbody th:id="'tbody-' + ${readerName}">
										
									</tbody>
								</table>
							</div>
						</div>
					
					</div>
					
					<div role="tabpanel" class="tab-pane" th:id="@{reader-{reader}-write(reader=${readerName})}">
						write
					</div>
					<div role="tabpanel" class="tab-pane" th:id="@{reader-{reader}-live(reader=${readerName})}">
						<div th:id="@{showlive-{reader}(reader=${readerName})}"></div>
					</div>
					
				</div>
			</div>
		</div>
	</div>

	<div class="content-table"></div>

	<div class="modal" tabindex="-1" role="dialog" id="modal" aria-labelledby="gridSystemModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
	     			<div class="modal-header">
	     				<button type="button" class="close" data-dismiss="modal" onclick="clearModal(); return false;" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	     				<h4 class="modal-title" id="gridSystemModalLabel">&nbsp;</h4>
	     			</div>
	     			<div class="modal-body" id="modal-body">
	     				<span class="text-muted">loading...</span>
	     			</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" onclick="clearModal(); return false;" data-dismiss="modal">Close</button>
				</div>
	   		</div>
		</div>
	</div>
	
	<script type="text/javascript" th:src="@{/js/jquery-3.2.1.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/popper.min.js}"></script>
    <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/feigRFID.js}"></script>
    
    <script th:each="reader, r : ${readers}" th:with="readerName=${#strings.replace(reader,'.','_')}" th:inline="javascript">
		/*<![CDATA[*/
		$(document).ready(function(){					    
		    $( $('[id^=tab-' + [[${readerName}]]) ).on('shown.bs.tab', function(e){
		    	handleTabButtons([[${readerName}]]);
		    });
		    getReaderData([[${readerName}]], 'info');
		});
		/*]]>*/
	</script>
    
</body>
</html>